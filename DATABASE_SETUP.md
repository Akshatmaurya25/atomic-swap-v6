# Yellow Network Arbitrage Bot - Database Setup Guide\n\nThis guide will help you set up the Supabase database for your Yellow Network Arbitrage Bot platform.\n\n## Prerequisites\n\n- A Supabase account (free tier is sufficient)\n- Basic understanding of SQL\n\n## Step-by-Step Setup\n\n### 1. Create Supabase Project\n\n1. Go to [supabase.com](https://supabase.com)\n2. Sign in or create an account\n3. Click \"New Project\"\n4. Choose your organization\n5. Fill in project details:\n   - **Name**: `yellow-network-arbitrage`\n   - **Database Password**: Create a secure password\n   - **Region**: Choose the closest to your users\n6. Click \"Create new project\"\n\n### 2. Get Database Credentials\n\n1. Go to your project dashboard\n2. Navigate to **Settings** > **API**\n3. Copy the following values:\n   - **Project URL**: `https://xxxxxxxxxxxxx.supabase.co`\n   - **Anon public key**: `eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...`\n\n### 3. Update Environment Variables\n\n1. In your project root, create or update `.env.local`:\n\n```bash\n# Supabase Configuration\nNEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key\n\n# WalletConnect (optional, for wallet integration)\nNEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID=your-wallet-connect-project-id\n\n# Alchemy (optional, for RPC endpoints)\nNEXT_PUBLIC_ALCHEMY_API_KEY=your-alchemy-api-key\n```\n\n### 4. Run Database Migrations\n\n1. In your Supabase dashboard, navigate to **SQL Editor**\n2. Execute the migration files in order:\n\n#### Step 4.1: Initial Schema\nCopy and paste the contents of `database/migrations/001_initial_schema.sql` and click **Run**.\n\nThis creates:\n- All required tables (trading_bots, opportunities, activities, etc.)\n- Indexes for better performance\n- Triggers for timestamp updates\n- UUID extensions\n\n#### Step 4.2: Security Policies\nCopy and paste the contents of `database/migrations/002_rls_policies.sql` and click **Run**.\n\nThis sets up:\n- Row Level Security (RLS) policies\n- User access controls\n- Automatic user profile creation\n- Default user settings\n\n### 5. Seed Demo Data\n\n1. In the SQL Editor, copy and paste the contents of `database/seed.sql`\n2. Click **Run**\n\nThis populates your database with:\n- Sample arbitrage opportunities\n- Price feed data\n- Demo data functions for new users\n\n### 6. Enable Realtime (Optional)\n\nFor real-time updates:\n1. Navigate to **Database** > **Replication**\n2. Enable realtime for these tables:\n   - `opportunities`\n   - `trading_bots`\n   - `activities`\n   - `price_feeds`\n\n## Verification\n\n1. Start your development server: `npm run dev`\n2. Visit `http://localhost:3000`\n3. The landing page should load without database errors\n4. Try signing up/in - you should see the database setup component if there are issues\n\n## Database Schema Overview\n\n### Core Tables\n\n- **`user_profiles`** - Extended user information\n- **`trading_bots`** - User's trading bot configurations\n- **`opportunities`** - Live arbitrage opportunities\n- **`activities`** - User activity log\n- **`user_settings`** - User preferences and settings\n- **`user_wallets`** - Connected wallet information\n- **`trades`** - Executed trade history\n- **`portfolio_snapshots`** - Historical portfolio data\n- **`price_feeds`** - Market price data\n- **`user_favorites`** - User's favorite opportunities\n\n### Key Features\n\n- **Row Level Security (RLS)**: Users can only access their own data\n- **Automatic User Setup**: New users get default settings and demo data\n- **Real-time Updates**: Live price feeds and opportunity updates\n- **Performance Optimized**: Proper indexing for fast queries\n\n## Troubleshooting\n\n### Common Issues\n\n#### \"relation does not exist\" error\n- **Solution**: Run the migration files in the correct order\n- Make sure `001_initial_schema.sql` runs successfully first\n\n#### \"permission denied\" errors\n- **Solution**: Check RLS policies are set up correctly\n- Ensure you're authenticated when accessing user-specific data\n\n#### Function does not exist\n- **Solution**: Make sure all SQL in migration files executed without errors\n- Check the Functions tab in Supabase dashboard\n\n#### No demo data appearing\n- **Solution**: Run `database/seed.sql` in the SQL Editor\n- Check if the `create_demo_data_for_user` function exists\n\n### Reset Database\n\nIf you need to start over:\n\n1. In SQL Editor, run:\n```sql\nDROP SCHEMA IF EXISTS public CASCADE;\nCREATE SCHEMA public;\nGRANT ALL ON SCHEMA public TO postgres;\nGRANT ALL ON SCHEMA public TO public;\n```\n\n2. Re-run all migration files\n\n### Development vs Production\n\n- **Development**: Use the free Supabase tier\n- **Production**: Consider upgrading for:\n  - More concurrent connections\n  - Better performance\n  - Advanced monitoring\n  - Automated backups\n\n## Environment-Specific Notes\n\n### Local Development\n- Uses `.env.local` for environment variables\n- Demo data is automatically created for new users\n- Real-time features work out of the box\n\n### Production Deployment\n- Use environment variables in your hosting platform\n- Consider connection pooling for high traffic\n- Set up monitoring and alerting\n- Regular database backups\n\n## Next Steps\n\nOnce your database is set up:\n\n1. Test user registration and login\n2. Verify demo data appears in the dashboard\n3. Check that real-time updates work\n4. Configure wallet integration\n5. Set up any additional API keys (Alchemy, WalletConnect)\n\n## Support\n\nIf you encounter issues:\n\n1. Check the browser console for errors\n2. Review Supabase logs in the dashboard\n3. Verify all environment variables are set\n4. Ensure migration files ran without errors\n\nFor additional help, check the [Supabase documentation](https://supabase.com/docs) or create an issue in the project repository.\n"